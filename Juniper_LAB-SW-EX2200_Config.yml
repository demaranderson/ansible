- name: Configure Juniper LAB-SW-EX2200
  hosts: LAB-SW-EX2200
  gather_facts: no
  connection: network_cli

  vars:
    ansible_network_os: junos

  tasks:
    - name: Configure device
      junipernetworks.junos.junos_command:
        commands:
          - configure
          - delete system services dhcp
          - set system host-name LAB-SW-EX2200
          - set system services ssh protocol-version v2
          - set interfaces me0 unit 0 family inet address 192.168.1.254/24
          - set protocols lldp interface all
          - set protocols lldp-med interface all
          - set poe interface all
          - commit

    - name: Set root user password
      junipernetworks.junos.junos_user:
        name: root
        encrypted_password: "$6$t2bUAuGGws3Cn4nt$MC9bt4PxKFpyfoCxtWL05oSW0bEHYudCQzej0P2.aviaNrcc/fwc0pCTmuO4YG56nw.8aQk5yS8lUpXfeWPcW0"
        state: present
